### 프록시 패턴과 데코레이터 패턴

프록시 패턴은 접근 제어가 목적이다.
- 권한에 따라 접근을 차단하거나
- 캐싱을 하거나
- 지연 로딩을 하는데 사용할 수 있다.

데코레이터 패턴은 부가 기능을 추가하는 것이 목적이다.
- 원래 서버가 제공하는 기능에 부가 기능을 더할 수 있다.
  - 예를 들면 요청 값이나, 응답 값을 중간에 변형하거나
  - 실행 시간을 측정해서 추가 로그를 남길 수 있다.

둘 다 프록시를 사용한다는 점은 동일하나, 의도가 다르다.

---
### 리플렉션

자바가 기본적으로 제공하는 JDK 동적 프록시 기술이나 CGLIB 같은 프록시 생성 오픈소스 기술을 활용하면
프록시 객체를 동적으로 만들어낼 수 있다. 이 말은 프록시 객체를 계속해서 생성하지 않아도 된다는 뜻이다.

하지만 동적 프록시를 이해하기 전에 자바의 리플렉션을 이해해야 한다.
리플렉션 기술을 사용하면 클래스나 메서드의 메타정보를 런타임에서 얻고 코드도 동적으로 호출할 수 있다.

리플렉션 기술은 런타임에 동작하기 때문에 컴파일 시점에 오류를 잡을 수 없다.
따라서 리플렉션은 일반적으로 사용하면 안된다. 개발자는 컴파일 오류가 발생하는 코드 기법을
우선시해야 한다. 리플렉션은 프레임워크 개발이나 또는 매우 일반적인 공통 처리가 필요할 때 부분적으로 사용한다.

### 동적 프록시

동적 프록시를 사용하면 프록시 객체를 동적으로 만들 수 있다. 그리고 동적 프록시에 원하는 실행 로직을 지정할 수 있다.
동적 프록시를 통해서 얻는 이점은 개발자가 직접 프록시 클래스를 만들지 않아도 된다는 것이다.
다만 JDK 동적 프록시는 인터페이스를 기반으로 프록시를 동적으로 만들어주기 때문에 인터페이스가 필수다.
과거에 스프링이 스프링 빈을 등록할 때 인터페이스를 강제했던 것은 이런 이유 때문이다.

```java
package java.lang.reflect;

public interface InvocationHandler {
  public Object invoke(Object proxy, Method method, Object[] args) throws Throwable;
}
```

- Object proxy : 프록시 객체 자신
- Method method : 메서드 정보
- Object[] args : 메서드의 매개변수


